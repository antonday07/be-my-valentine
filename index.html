<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Will you be my Valentine? üíï</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Quicksand:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <style type="text/tailwindcss">
      @theme {
        --font-sans: "Nunito", ui-sans-serif, system-ui, sans-serif;
        --font-display: "Quicksand", ui-sans-serif, system-ui, sans-serif;
      }
    </style>
    <style>
      body {
        font-family: "Nunito", sans-serif;
      }
      .font-display {
        font-family: "Quicksand", sans-serif;
      }
      .valentine-bg {
        background: linear-gradient(
          135deg,
          #fce4ec 0%,
          #f8bbd9 30%,
          #f48fb1 60%,
          #ec407a 100%
        );
        min-height: 100vh;
      }
      .modal-glass {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(12px);
        box-shadow: 0 25px 50px -12px rgba(190, 24, 93, 0.25);
      }
      .btn-yes {
        background: linear-gradient(135deg, #ec407a, #e91e63);
        transition:
          transform 0.2s,
          box-shadow 0.2s;
        cursor: pointer;
      }
      .btn-yes:hover {
        transform: scale(1.08);
        box-shadow: 0 10px 25px -5px rgba(236, 64, 122, 0.5);
      }
      .btn-no {
        transition:
          left 0.15s ease-out,
          top 0.15s ease-out;
        cursor: pointer;
      }
      .btn-no.floating {
        position: absolute;
      }
      #congrats-page {
        display: none;
        opacity: 0;
        transition: opacity 0.5s ease;
      }
      #congrats-page.visible {
        display: block;
        opacity: 1;
        animation: congratsFade 0.6s ease forwards;
      }
      @keyframes congratsFade {
        from {
          opacity: 0;
          transform: scale(0.96);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
      #invitation-page.hidden {
        display: none;
      }
      .heart-float {
        animation: heartFloat 4s ease-in-out infinite;
      }
      @keyframes heartFloat {
        0%,
        100% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(-12px) rotate(5deg);
        }
      }
      .icon-drift {
        animation: iconDrift 6s ease-in-out infinite;
      }
      @keyframes iconDrift {
        0%,
        100% {
          transform: translateY(0) rotate(-3deg);
        }
        50% {
          transform: translateY(-18px) rotate(6deg);
        }
      }
      .icon-pulse {
        animation: iconPulse 3s ease-in-out infinite;
      }
      @keyframes iconPulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.7;
        }
        50% {
          transform: scale(1.2);
          opacity: 1;
        }
      }
      canvas#fireworks {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 10;
      }
      .video-wrap .video-toggle {
        opacity: 0;
        transition: opacity 0.3s;
      }
      .video-wrap:hover .video-toggle {
        opacity: 1;
      }
      .congrats-text {
        animation: popIn 0.5s ease forwards;
        opacity: 0;
      }
      @keyframes popIn {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
    </style>
  </head>
  <body
    class="valentine-bg min-h-screen flex items-center justify-center p-4 overflow-x-hidden"
  >
    <!-- Invitation page -->
    <div
      id="invitation-page"
      class="fixed inset-0 flex items-center justify-center z-20 p-4"
    >
      <!-- Decorative background icons -->
      <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <span class="absolute text-4xl top-[10%] left-[8%] heart-float"
          >‚ù§Ô∏è</span
        >
        <span
          class="absolute text-3xl top-[18%] right-[12%] heart-float"
          style="animation-delay: 0.5s"
          >üíï</span
        >
        <span
          class="absolute text-4xl bottom-[22%] left-[15%] heart-float"
          style="animation-delay: 1s"
          >üíó</span
        >
        <span
          class="absolute text-3xl bottom-[18%] right-[8%] heart-float"
          style="animation-delay: 1.5s"
          >‚ù§Ô∏è</span
        >
        <span
          class="absolute text-3xl top-[8%] left-[45%] icon-drift"
          style="animation-delay: 0.3s"
          >üç´</span
        >
        <span
          class="absolute text-2xl top-[30%] left-[5%] icon-pulse"
          style="animation-delay: 0.8s"
          >üíå</span
        >
        <span
          class="absolute text-3xl top-[5%] right-[30%] icon-drift"
          style="animation-delay: 1.2s"
          >üåπ</span
        >
        <span
          class="absolute text-2xl bottom-[30%] right-[20%] icon-pulse"
          style="animation-delay: 0.4s"
          >üíù</span
        >
        <span
          class="absolute text-3xl bottom-[10%] left-[40%] heart-float"
          style="animation-delay: 2s"
          >üíñ</span
        >
        <span
          class="absolute text-2xl top-[40%] right-[5%] icon-drift"
          style="animation-delay: 1.8s"
          >üç¨</span
        >
        <span
          class="absolute text-3xl bottom-[8%] right-[35%] icon-pulse"
          style="animation-delay: 0.6s"
          >üíò</span
        >
        <span
          class="absolute text-2xl top-[50%] left-[3%] heart-float"
          style="animation-delay: 2.5s"
          >üåπ</span
        >
        <span
          class="absolute text-3xl bottom-[40%] right-[3%] icon-drift"
          style="animation-delay: 1.4s"
          >üç´</span
        >
        <span
          class="absolute text-2xl top-[3%] left-[25%] icon-pulse"
          style="animation-delay: 2.2s"
          >üíã</span
        >
      </div>

      <div
        class="modal-glass rounded-3xl p-8 py-12 max-w-2xl w-full relative text-center"
      >
        <h1
          class="font-display font-bold sm:text-3xl text-rose-700 mb-10 leading-tight"
        >
          Will you be my Valentine, Hong Luyen?
        </h1>
        <div id="buttons-container" class="relative min-h-[100px]">
          <div id="buttons-row" class="flex items-center justify-center gap-16">
            <button
              id="btn-yes"
              type="button"
              class="btn-yes px-8 py-3 rounded-full text-white font-semibold text-lg shadow-lg z-10"
            >
              Yes
            </button>
            <button
              id="btn-no"
              type="button"
              class="btn-no px-6 py-3 rounded-full bg-rose-200 text-rose-700 font-semibold text-lg border-2 border-rose-300 hover:bg-rose-300 z-10"
            >
              No
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Congrats page -->
    <div
      id="congrats-page"
      class="relative z-20 w-full max-w-2xl mx-auto text-center px-4 py-8"
    >
      <h2
        class="font-display font-bold text-4xl sm:text-5xl text-rose-700 mb-3 congrats-text"
      >
        Yayyy! üíï
      </h2>
      <p
        class="text-xl sm:text-2xl text-rose-600 mb-2 congrats-text"
        style="animation-delay: 0.2s"
      >
        Happy Valentine my babi cute c∆∞ng x·ªâu ü•∞
      </p>
      <p
        class="text-lg text-rose-500 mb-6 congrats-text"
        style="animation-delay: 0.4s"
      >
        Thank you for being mine, sweet Valentine üíó
      </p>
      <div
        class="video-wrap rounded-2xl overflow-hidden shadow-2xl inline-block mb-6 congrats-text relative"
        style="animation-delay: 0.6s"
      >
        <video
          id="valentine-video"
          src="bubu-video-valentine-quote.mp4"
          loop
          muted
          playsinline
          class="w-full max-w-lg block rounded-2xl"
        ></video>
        <button
          id="btn-play"
          type="button"
          class="video-toggle absolute inset-0 flex items-center justify-center bg-black/30 rounded-2xl cursor-pointer hover:bg-black/20"
        >
          <span
            class="bg-white/90 rounded-full w-16 h-16 flex items-center justify-center shadow-lg"
          >
            <span id="btn-play-icon" class="text-rose-600 text-3xl ml-1"
              >&#9654;</span
            >
          </span>
        </button>
      </div>
      <button
        id="btn-dance"
        type="button"
        class="btn-yes px-8 py-3 rounded-full text-white font-semibold text-lg shadow-lg congrats-text"
        style="animation-delay: 0.8s"
      >
        Let's dance together üíÉüï∫
      </button>
    </div>

    <!-- Dance page -->
    <div
      id="dance-page"
      class="fixed inset-0 z-30 flex items-center justify-center valentine-bg"
      style="display: none"
    >
      <div class="text-center">
        <h2
          class="font-display font-bold text-3xl sm:text-4xl text-rose-700 mb-4 congrats-text"
        >
          Nh·∫£y c√πng budu n√†o em iu ü§ì
        </h2>
        <div
          class="video-wrap rounded-2xl overflow-hidden shadow-2xl inline-block relative"
        >
          <video
            id="dance-video"
            src="bubu-valentine-video-dancing.mp4"
            loop
            muted
            playsinline
            class="block rounded-2xl"
            style="max-height: 70vh"
          ></video>
          <button
            id="btn-play-dance"
            type="button"
            class="video-toggle absolute inset-0 flex items-center justify-center bg-black/30 rounded-2xl cursor-pointer hover:bg-black/20"
          >
            <span
              class="bg-white/90 rounded-full w-16 h-16 flex items-center justify-center shadow-lg"
            >
              <span id="btn-play-dance-icon" class="text-rose-600 text-3xl ml-1"
                >&#9654;</span
              >
            </span>
          </button>
        </div>
        <div class="mt-4">
          <button
            id="btn-back"
            type="button"
            class="px-6 py-2 rounded-full bg-white/80 text-rose-600 font-semibold border-2 border-rose-300 hover:bg-white cursor-pointer"
          >
            ‚Üê Back
          </button>
        </div>
      </div>
    </div>

    <canvas id="fireworks" aria-hidden="true"></canvas>

    <script>
      (function () {
        const btnYes = document.getElementById("btn-yes");
        const btnNo = document.getElementById("btn-no");
        const invitationPage = document.getElementById("invitation-page");
        const congratsPage = document.getElementById("congrats-page");
        const container = document.getElementById("buttons-container");
        const canvas = document.getElementById("fireworks");

        if (!container || !btnNo || !btnYes) return;

        // Toggle play/pause helper
        function setupVideoToggle(btn, vid, icon) {
          if (!btn || !vid || !icon) return;
          btn.addEventListener("click", function () {
            if (vid.paused) {
              vid.muted = false;
              vid.play();
              icon.innerHTML = "&#9646;&#9646;";
              icon.style.marginLeft = "0";
            } else {
              vid.pause();
              icon.innerHTML = "&#9654;";
              icon.style.marginLeft = "4px";
            }
          });
        }

        const btnPlay = document.getElementById("btn-play");
        const video = document.getElementById("valentine-video");
        setupVideoToggle(
          btnPlay,
          video,
          document.getElementById("btn-play-icon"),
        );

        const btnPlayDance = document.getElementById("btn-play-dance");
        const danceVideo = document.getElementById("dance-video");
        setupVideoToggle(
          btnPlayDance,
          danceVideo,
          document.getElementById("btn-play-dance-icon"),
        );

        // Dance page
        const btnDance = document.getElementById("btn-dance");
        const dancePage = document.getElementById("dance-page");
        const btnBack = document.getElementById("btn-back");

        if (btnDance && dancePage) {
          btnDance.addEventListener("click", function () {
            if (video) {
              video.pause();
            }
            congratsPage.style.display = "none";
            dancePage.style.display = "flex";
          });
        }
        if (btnBack && dancePage) {
          btnBack.addEventListener("click", function () {
            if (danceVideo) {
              danceVideo.pause();
            }
            dancePage.style.display = "none";
            congratsPage.style.display = "block";
          });
        }

        const padding = 20;
        let isFloating = false;

        function makeFloating() {
          if (isFloating) return;
          isFloating = true;
          btnNo.classList.add("floating");
        }

        function moveNoButton() {
          makeFloating();
          const rect = container.getBoundingClientRect();
          const noRect = btnNo.getBoundingClientRect();
          const yesRect = btnYes.getBoundingClientRect();

          const maxX = rect.width - noRect.width - padding;
          const maxY = rect.height - noRect.height - padding;

          // Get Yes button position relative to container
          const yesLeft = yesRect.left - rect.left;
          const yesTop = yesRect.top - rect.top;
          const yesRight = yesLeft + yesRect.width;
          const yesBottom = yesTop + yesRect.height;

          // Try positions until we find one that doesn't overlap Yes
          let newX,
            newY,
            attempts = 0;
          do {
            newX = padding + Math.random() * Math.max(0, maxX - padding);
            newY = padding + Math.random() * Math.max(0, maxY - padding);
            attempts++;
            const noRight = newX + noRect.width;
            const noBottom = newY + noRect.height;
            const overlaps = !(
              noRight < yesLeft - 10 ||
              newX > yesRight + 10 ||
              noBottom < yesTop - 10 ||
              newY > yesBottom + 10
            );
            if (!overlaps) break;
          } while (attempts < 30);

          btnNo.style.left = newX + "px";
          btnNo.style.top = newY + "px";
        }

        btnNo.addEventListener("mouseenter", moveNoButton);
        btnNo.addEventListener("mousemove", function (e) {
          const rect = container.getBoundingClientRect();
          const noRect = btnNo.getBoundingClientRect();
          const noCenterX = noRect.left - rect.left + noRect.width / 2;
          const noCenterY = noRect.top - rect.top + noRect.height / 2;
          const mouseX = e.clientX - rect.left;
          const mouseY = e.clientY - rect.top;
          if (Math.hypot(mouseX - noCenterX, mouseY - noCenterY) < 70)
            moveNoButton();
        });

        btnYes.addEventListener("click", function () {
          invitationPage.classList.add("hidden");
          congratsPage.classList.add("visible");
          startFireworks();
        });

        function startFireworks() {
          const ctx = canvas.getContext("2d");
          if (!ctx) return;
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;

          const colors = [
            "#ec407a",
            "#f48fb1",
            "#f8bbd9",
            "#e91e63",
            "#ff6090",
            "#ffeb3b",
            "#ff9800",
            "#e040fb",
            "#7c4dff",
          ];
          const particles = [];
          const confetti = [];

          function createFirework(x, y) {
            const count = 80 + Math.floor(Math.random() * 50);
            const color = colors[Math.floor(Math.random() * colors.length)];
            for (let i = 0; i < count; i++) {
              const angle = (Math.PI * 2 * i) / count + Math.random() * 0.5;
              const speed = 3 + Math.random() * 7;
              particles.push({
                x,
                y,
                vx: Math.cos(angle) * speed,
                vy: Math.sin(angle) * speed,
                color,
                life: 1,
                decay: 0.008 + Math.random() * 0.008,
                size: 1.5 + Math.random() * 2.5,
              });
            }
          }

          function createConfettiBurst(x, y) {
            for (let i = 0; i < 40; i++) {
              confetti.push({
                x,
                y,
                vx: (Math.random() - 0.5) * 10,
                vy: -3 - Math.random() * 6,
                color: colors[Math.floor(Math.random() * colors.length)],
                life: 1,
                decay: 0.005 + Math.random() * 0.005,
                w: 4 + Math.random() * 6,
                h: 3 + Math.random() * 4,
                rot: Math.random() * Math.PI * 2,
                rotSpeed: (Math.random() - 0.5) * 0.3,
              });
            }
          }

          let frame = 0;
          function loop() {
            frame++;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // More frequent fireworks
            if (frame % 25 === 0) {
              createFirework(
                Math.random() * canvas.width,
                canvas.height * (0.15 + Math.random() * 0.5),
              );
            }
            // Extra burst at different intervals
            if (frame % 40 === 20) {
              createFirework(
                Math.random() * canvas.width,
                canvas.height * (0.2 + Math.random() * 0.4),
              );
            }
            // Confetti bursts
            if (frame % 60 === 0) {
              createConfettiBurst(
                Math.random() * canvas.width,
                canvas.height * (0.2 + Math.random() * 0.3),
              );
            }

            // Draw particles
            for (let i = particles.length - 1; i >= 0; i--) {
              const p = particles[i];
              p.x += p.vx;
              p.y += p.vy;
              p.vy += 0.06;
              p.vx *= 0.99;
              p.life -= p.decay;
              if (p.life <= 0) {
                particles.splice(i, 1);
                continue;
              }
              ctx.globalAlpha = p.life;
              ctx.fillStyle = p.color;
              ctx.beginPath();
              ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
              ctx.fill();
            }

            // Draw confetti
            for (let i = confetti.length - 1; i >= 0; i--) {
              const c = confetti[i];
              c.x += c.vx;
              c.y += c.vy;
              c.vy += 0.1;
              c.rot += c.rotSpeed;
              c.life -= c.decay;
              if (c.life <= 0) {
                confetti.splice(i, 1);
                continue;
              }
              ctx.globalAlpha = c.life;
              ctx.fillStyle = c.color;
              ctx.save();
              ctx.translate(c.x, c.y);
              ctx.rotate(c.rot);
              ctx.fillRect(-c.w / 2, -c.h / 2, c.w, c.h);
              ctx.restore();
            }

            ctx.globalAlpha = 1;
            if (particles.length > 0 || confetti.length > 0 || frame < 600)
              requestAnimationFrame(loop);
          }

          // Initial big burst
          createFirework(canvas.width * 0.3, canvas.height * 0.3);
          createFirework(canvas.width * 0.7, canvas.height * 0.25);
          createConfettiBurst(canvas.width * 0.5, canvas.height * 0.4);
          loop();
        }

        window.addEventListener("resize", function () {
          if (congratsPage.classList.contains("visible")) {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
          }
        });
      })();
    </script>
  </body>
</html>
